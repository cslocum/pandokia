# Notes for making a release
# --

# Source distribution

release=pandokia-`grep __version__ pandokia/__init__.py | awk '{print $3}' | tr -d '"'`

echo $release

d=https://svn.stsci.edu/svn/ssb/etal/pandokia/

svn del -m'replacing branch' $d/$release

svn copy -m'release branch' $d/trunk $d/$release

rm -rf $release

svn checkout -q $d/$release

cd $release

svn info > stsci_remember_svn_info

find . -name .svn | xargs rm -rf 

cd ..

rm -f /eng/ssb/src/$release.tar.gz

tar zcf /eng/ssb/src/$release.tar.gz $release


#####

# documentation

cd $work

work=`pwd`

release=pandokia-`grep __version__ pandokia/__init__.py | awk '{print $3}' | tr -d '"'`

echo $release

tar xf  /eng/ssb/src/$release.tar.gz  

cd $release

rm -rf $work/py

python setup.py install --home $work/py

PYTHONPATH=$work/py/libpython

export PYTHONPATH

cd doc

make clean

make html

# install draft document

make install

# install final document

dd=/eng/ssb/websites/ssbpublic/testing/pandokia/$release

mkdir  $dd

cp -r build/html/. $dd/.
